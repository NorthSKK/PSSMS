<div class="container-fluid py-4 animate__animated animate__fadeIn">
  <div class="card shadow-sm border-0 mb-4 bg-primary text-white">
    <div class="card-body p-3 d-flex justify-content-between align-items-center">
      <div>
        <h5 class="mb-1"><i class="fas fa-cogs me-2"></i>ตั้งค่าโครงสร้างวิชา (ปพ.5)</h5>
        <p class="mb-0 small opacity-75">กำหนดสัดส่วนคะแนน และตัวชี้วัด/ชิ้นงาน ประจำรายวิชา</p>
      </div>
      <i class="fas fa-sliders-h fa-2x opacity-25"></i>
    </div>
  </div>

  <div class="row g-3">
    <div class="col-md-4">
      <div class="card shadow-sm border-0 h-100">
        <div class="card-header bg-white fw-bold py-3 text-primary border-bottom">
          <i class="fas fa-book me-2"></i>1. เลือกรายวิชาที่สอน
        </div>
        <div class="card-body">
          <label class="form-label small fw-bold text-muted">ภาคเรียน/ปีการศึกษา</label>
          <div class="input-group mb-3 shadow-sm">
            <input type="text" id="configTerm" class="form-control bg-white text-center" readonly>
            <span class="input-group-text bg-light">/</span>
            <input type="text" id="configYear" class="form-control bg-white text-center" readonly>
          </div>

          <label class="form-label small fw-bold text-muted">รายวิชา</label>
          <select id="configClassSelect" class="form-select shadow-sm border-primary" onchange="loadSubjectConfig()">
            <option value="">⏳ กำลังโหลดวิชา...</option>
          </select>
          
          <div id="configSubjectInfo" class="mt-4 d-none">
            <div class="alert alert-info border-start border-4 border-info shadow-sm py-2">
              <div class="small text-muted mb-1">กำลังตั้งค่าสำหรับ:</div>
              <div class="fw-bold text-dark" id="dispConfigSubject"></div>
              <div class="badge bg-primary mt-1" id="dispConfigClass"></div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="col-md-8">
      <div class="card shadow-sm border-0 h-100 opacity-50" id="configPanel" style="pointer-events: none;">
        <div class="card-header bg-white fw-bold py-3 text-primary border-bottom d-flex justify-content-between align-items-center">
          <div><i class="fas fa-balance-scale me-2"></i>2. โครงสร้างคะแนน (รวม <span id="totalScoreBadge" class="text-danger fs-5">0</span> / 100)</div>
        </div>
        <div class="card-body bg-light">
          
          <div class="row g-2 mb-4">
            <div class="col-md-4">
              <label class="form-label small fw-bold text-success">คะแนนเก็บระหว่างเรียน</label>
              <input type="number" id="scoreFormative" class="form-control text-center shadow-sm score-input" value="0" onkeyup="calculateTotalConfigScore()">
            </div>
            <div class="col-md-4">
              <label class="form-label small fw-bold text-warning text-dark">สอบกลางภาค</label>
              <input type="number" id="scoreMidterm" class="form-control text-center shadow-sm score-input" value="0" onkeyup="calculateTotalConfigScore()">
            </div>
            <div class="col-md-4">
              <label class="form-label small fw-bold text-danger">สอบปลายภาค</label>
              <input type="number" id="scoreFinal" class="form-control text-center shadow-sm score-input" value="0" onkeyup="calculateTotalConfigScore()">
            </div>
          </div>

          <div class="d-flex justify-content-between align-items-center mb-2">
            <label class="form-label small fw-bold text-dark m-0"><i class="fas fa-tasks me-1"></i>รายละเอียดตัวชี้วัด / ชิ้นงาน (คะแนนเก็บ)</label>
            <button class="btn btn-sm btn-outline-primary" onclick="addIndicatorRow()"><i class="fas fa-plus me-1"></i>เพิ่มช่องคะแนน</button>
          </div>
          
          <div class="table-responsive bg-white rounded shadow-sm border mb-3">
            <table class="table table-hover align-middle mb-0">
              <thead class="table-light text-muted small">
                <tr>
                   <th class="text-center" style="width: 50px;">#</th>
                    <th style="width: 250px;">ชื่อตัวชี้วัด/ชิ้นงาน (ย่อ)</th>
                    <th>รายละเอียดฉบับเต็ม / จุดประสงค์การเรียนรู้</th> <th class="text-center" style="width: 100px;">คะแนนเต็ม</th>
                  <th class="text-center" style="width: 50px;">ลบ</th>
                </tr>
              </thead>
              <tbody id="indicatorTableBody">
              </tbody>
            </table>
          </div>

          <button class="btn btn-primary w-100 py-3 fw-bold shadow-sm" id="btnSaveConfig" onclick="saveSubjectConfigData()">
            <i class="fas fa-save me-2"></i>บันทึกโครงสร้างวิชา
          </button>

        </div>
      </div>
    </div>
  </div>
</div>